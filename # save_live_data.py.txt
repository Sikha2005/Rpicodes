# save_live_data.py
import sqlite3
import os

DB_PATH = "/home/raspberrypi/iot_data.db"

def save_live_data(temp, hum, gas):
    print(">>> save_live_data() CALLED")
    print(">>> DB PATH:", DB_PATH)

    try:
        conn = sqlite3.connect(DB_PATH)
        cursor = conn.cursor()

        cursor.execute("""
            INSERT INTO live_data (temperature, humidity, gas)
            VALUES (?, ?, ?)
        """, (temp, hum, gas))

        conn.commit()
        conn.close()

        print(">>> DATA INSERTED INTO SQLITE")

    except Exception as e:
        print(">>> SQLITE ERROR:", e)
